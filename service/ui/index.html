<html ng-app="uiApp">
    <head>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
        <script type="application/javascript" src="app.js"></script>
    </head>
    <body ng-controller="LandingController">
        <h2>PABTC Site</h2>
        
        <!-- USERS TABLE -->
        <hr>
        <h3>Create User</h3>
		<table>
			<tbody>
				<tr>
					<td>Name</td>
					<td><input ng-model="Model.newUser.name" placeholder="User Name"></td>
				</tr>
				<tr>
					<td><button class="btn btn-default" ng-click="Actions.createUser()">Create User</button></td>
				</tr>
			</tbody>
		</table>
        
		<br><br>
		
		
        <h3>Users</h3>
        <table ng-show="Model.users.length" class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Date Created</th>
                    <th>HREF</th>
                    <th>API Key</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in Model.users">
                    <td>{{user.name}}</td>
                    <td>{{user.dateCreated | date: 'MMM d, y h:mm a'}}</td>
                    <td><a href="{{user.href}}">{{user.href}}</a></td>
                    <td>
                        <div ng-if="user.APIKey">
							API Key Created
                        </div>
                        <div ng-if="!user.APIKey">
                            <button class="btn btn-default" ng-click="Actions.generateAPIKey(user._id)">Generate API Key</button>
                        </div>
                    </td>
                    <td><button class="btn btn-default" ng-click="Actions.selectUser(user)">Select</button></td>
                </tr>
            </tbody>
        </table>
		<br><br>
		
		
        <h3>Create Tournament</h3>
		<table>
			<tbody>
				<tr>
					<td>Name</td>
					<td><input ng-model="Model.newTournament.name" placeholder="Tournament Name"></td>
				</tr>
				<tr>
					<td>API Key</td>
					<td><input ng-model="Model.newTournament.APIKey" placeholder="API Key"></td>
				</tr>
				<tr>
					<td><button class="btn btn-default" ng-click="Actions.createTournament()">Create Tournament</button></td>
				</tr>
			</tbody>
		</table>
		<br><br>
		
        <h3>Register User with Tournament</h3>
		<table>
			<tbody>
				<tr ng-repeat="user in Model.selectedUsers">
                    <td>{{user.name}}</td>
                    <td><button class="btn btn-default" ng-click="Actions.removeFromSelection($index)">Remove</button></td>
				</tr>
                <tr>
                    <td>Selected Tournament:</td>
                    <td>{{Model.selectedTournament.name}}</td>
                </tr>
				<tr>
					<td><button class="btn btn-default" ng-click="Actions.registerUsersToTournament()">Register To Tournament</button></td>
				</tr>
			</tbody>
		</table>
		<br><br>
		
		<br>
		
        <h3>Tournaments</h3>
        <table ng-show="Model.tournaments.length" class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Date Created</th>
                    <th>Created By</th>
                    <th>Registered Players</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="tournament in Model.tournaments">
                    <td><a href="{{tournament.href}}">{{tournament.name}}</a>
                    <td>{{tournament.dateCreated | date: 'MMM d, y h:mm a'}}</td>
                    <td><a href="{{tournament.createdBy}}">{{tournament.createdBy}}</a></td>
                    <td>
                        {{tournament.registeredPlayers.length}} / {{tournament.totalPlayers}}<br>
                        <table>
                            <tr ng-repeat="player in tournament.registeredPlayers">
                                <td>{{player.name}}</td>
                            </tr>
                        </table>
                    </td>
                    <td><button class="btn btn-default" ng-click="Actions.selectTournament(tournament)">Select</button></td>
                </tr>
            </tbody>
        </table>
        
        <hr>
        <a href="http://github.com/jtibble/pabtc">Contribute on Github</a>
    </body>
</html>